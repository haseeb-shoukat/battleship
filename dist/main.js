(()=>{"use strict";const e=function(e){return{info:e,coords:e.coords,hit:[],processHit:function(e){this.hit.push(e)},isSunk:function(){return this.hit.length===this.coords.length},contains:function(e,t){return this[t].some((t=>JSON.stringify(t)===JSON.stringify(e)))}}};class t{constructor(t="player"){this.myBoard=function(){let t=[],o=[];for(let e=0;e<10;e++)for(let n=0;n<10;n++)t.push([e,n]),o.push([e,n]);return{ships:[],missed:[],types:[{type:"Carrier",len:5},{type:"Battleship",len:4},{type:"Destroyer",len:3},{type:"Submarine",len:3},{type:"Patrol Boat",len:2}],legalPlacements:o,legalMoves:t,automaticShips:function(){this.types.forEach((t=>{const o=["x","y"][Math.floor(2*Math.random())];let n=[];for(;!this.canPlaceShip(n);){n=[];let[e,r]=this.legalPlacements[Math.floor(Math.random()*this.legalPlacements.length)];if("x"===o)for(let o=r;o<r+t.len;o++)n.push([e,o]);else for(let o=e;o<e+t.len;o++)n.push([o,r])}let r={coords:n,axis:o};this.ships.push(e(r)),this.updateLegalPlacements(r)}))},placeShip:function(t){this.ships.push(e(t)),this.updateLegalPlacements(t)},canPlaceShip:function(e){return!(e.length<2)&&e.every((e=>this.legalPlacements.some((t=>JSON.stringify(e)===JSON.stringify(t)))))},updateLegalPlacements:function(e){let t=JSON.parse(JSON.stringify(e.coords)),[o,n]=e.coords[0],[r,a]=e.coords[e.coords.length-1];"y"===e.axis?(t.push([o-1,n],[r+1,a]),t.forEach((([e,o])=>{t.push([e,o-1],[e,o+1])})),e.coords.forEach((([e,o])=>{t.push([e,o-1],[e,o+1])}))):(t.push([o,n-1],[r,a+1]),t.forEach((([e,o])=>{t.push([e-1,o],[e+1,o])})),e.coords.forEach((([e,o])=>{t.push([e-1,o],[e+1,o])})));let i=this.legalPlacements.filter((e=>t.every((t=>JSON.stringify(e)!==JSON.stringify(t)))));this.legalPlacements=i},receiveAttack:function(e,t){let o=!1;return this.ships.every((n=>!n.contains([e,t],"coords")||(n.processHit([e,t]),o=!0,!1))),!1===o&&this.missed.push([e,t]),this.updateLegal(e,t),o},allSunk:function(){return this.ships.every((e=>e.isSunk()))},updateLegal:function(e,t){let o=this.legalMoves.filter((o=>JSON.stringify(o)!==JSON.stringify([e,t])));this.legalMoves=o},isIllegal:function(e,t){return this.legalMoves.every((o=>JSON.stringify(o)!==JSON.stringify([e,t])))}}}(),this.enemy,this.id=t,this.currentTurn=!1}setEnemy(e){this.enemy=e}setCurrent(e){this.currentTurn=e}attack(e,t){return this.enemy.receive(e,t)}compShips(){"comp"===this.id&&this.myBoard.automaticShips()}compAttack(){if("comp"!==this.id)return;let e=this.enemy.myBoard.legalMoves,[t,o]=e[Math.floor(Math.random()*e.length)];return this.enemy.receive(t,o)}receive(e,t){if(this.myBoard.isIllegal(e,t))return"Illegal Move";!0!==this.myBoard.receiveAttack(e,t)&&(this.currentTurn=!0,this.enemy.setCurrent(!1))}}const o=function(){document.body.innerHTML='<div class="main-title">Battleship</div>\n  <div class="board">\n      <div class="board-one"></div>\n  </div>\n  <div class="board">\n      <div class="board-two"></div>\n  </div>\n  <div class="overlay">\n      <div class="card">\n          <div class="card-heading">Welcome to Battleship!</div>\n          <div class="card-text"></div>\n          <button class="rotate-btn">Rotate</button>\n          <div class="placing-board"></div>\n      </div>\n  </div>';const e=document.querySelector(".board-one"),t=document.querySelector(".board-two"),o=document.querySelector(".placing-board"),r=document.querySelector(".rotate-btn");let a=[],i="x";r.addEventListener("click",(e=>{i="y"===i?"x":"y"}));for(let o=0;o<10;o++)for(let n=0;n<10;n++){const r=document.createElement("div");r.classList.add("board-item"),r.dataset.coord=[n,o].join(""),e.appendChild(r),t.appendChild(r.cloneNode())}const s=function(e,t){!function(e){o.innerHTML="";for(let e=0;e<10;e++)for(let t=0;t<10;t++){const n=document.createElement("div");n.classList.add("board-item","invalid-placement"),n.dataset.coord=[t,e].join(""),o.appendChild(n)}e.myBoard.legalPlacements.forEach((([e,t])=>{document.querySelector(`.placing-board > [data-coord="${e}${t}"`).classList.remove("invalid-placement")})),e.myBoard.ships.forEach((e=>{e.coords.forEach((([e,t])=>{const o=document.querySelector(`.placing-board > [data-coord="${e}${t}"`);o.classList.remove("invalid-placement"),o.classList.add("ship")}))}))}(e);const n=document.querySelectorAll(".placing-board > .board-item"),r=document.querySelector(".card-text"),a=e.myBoard.types[t];r.textContent=`Place your ${a.type}`,n.forEach((o=>{o.addEventListener("mouseover",c.bind(null,o,a,e)),o.addEventListener("mouseout",l),o.addEventListener("click",d.bind(null,e,a,t))}))},c=function(e,t,o){const[n,r]=e.dataset.coord.split("").map(Number);let s=[];if("y"===i)for(let e=n;e<n+t.len;e++)s.push([e,r]);else for(let e=r;e<r+t.len;e++)s.push([n,e]);if(o.myBoard.canPlaceShip(s))s.forEach((([e,t])=>{document.querySelector(`.placing-board > [data-coord="${[e,t].join("")}"]`).classList.add("hover")})),a=s;else{let[e,t]=s[0];document.querySelector(`.placing-board > [data-coord="${[e,t].join("")}"]`).classList.add("invalid-hover"),a=[]}},l=function(e){document.querySelectorAll(".hover").forEach((e=>e.classList.remove("hover"))),document.querySelectorAll(".invalid-hover").forEach((e=>e.classList.remove("invalid-hover")))},d=function(e,t,o){e.myBoard.canPlaceShip(a)&&(e.myBoard.placeShip({coords:a,axis:i}),"Patrol Boat"===t.type?(document.querySelector(".overlay").remove(),n.gameLoop()):s(e,o+1))},u=function(e){let t;"player"===e.id?(t="one",e.myBoard.ships.forEach((e=>{e.coords.forEach((e=>{document.querySelector(`.board-${t} > [data-coord="${e.join("")}"]`).classList.add("ship")}))}))):t="two",e.myBoard.missed.forEach((e=>{document.querySelector(`.board-${t} > [data-coord="${e.join("")}"]`).classList.add("missed")})),e.myBoard.ships.forEach((e=>{e.hit.forEach((e=>{document.querySelector(`.board-${t} > [data-coord="${e.join("")}"]`).classList.add("hit")}))}))};return{render:function(e,t){u(e),u(t)},renderPlacingBoard:function(e){s(e,0)},endGame:function(e){const t=document.createElement("div");t.classList.add("overlay"),t.innerHTML=`\n    <div class="overlay">\n        <div class="end-card">\n            <div class="card-heading">${e}</div>\n            <button class="restart-btn">Play Again</button>\n        </div>\n    </div>`,document.body.appendChild(t)}}}(),n=function(){let e,n;const r=function(){o.render(e,n),!0!==e.currentTurn?a():n.myBoard.legalMoves.forEach((e=>{document.querySelector(`.board-two > [data-coord="${e.join("")}"]`).addEventListener("click",a)}))},a=function(t="null"){if(!0===e.currentTurn){let[o,n]=t.target.dataset.coord.split("").map(Number);e.attack(o,n)}else n.compAttack();let a=i();a?o.endGame(a):r()},i=function(){let t;return t=e.myBoard.allSunk()?"Computer Wins! Better luck next time.":!!n.myBoard.allSunk()&&"Congratulations! You win.",t};return{initialize:function(){e=new t,n=new t("comp"),e.setEnemy(n),n.setEnemy(e),e.setCurrent(!0),n.compShips(),o.renderPlacingBoard(e)},gameLoop:r}}();n.initialize()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Olsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9TaGlwLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9QbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL0dhbWVCb2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvcmVuZGVyR2FtZS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvcnVuR2FtZS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNoaXAgPSBmdW5jdGlvbiAoaW5mbykge1xuICByZXR1cm4ge1xuICAgIGluZm8sXG4gICAgY29vcmRzOiBpbmZvLmNvb3JkcyxcbiAgICBoaXQ6IFtdLFxuICAgIHByb2Nlc3NIaXQ6IGZ1bmN0aW9uIChjb29yZCkge1xuICAgICAgdGhpcy5oaXQucHVzaChjb29yZCk7XG4gICAgfSxcbiAgICBpc1N1bms6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmhpdC5sZW5ndGggPT09IHRoaXMuY29vcmRzLmxlbmd0aCA/IHRydWUgOiBmYWxzZTtcbiAgICB9LFxuICAgIGNvbnRhaW5zOiBmdW5jdGlvbiAoY29vcmQsIG9iaikge1xuICAgICAgcmV0dXJuIHRoaXNbb2JqXS5zb21lKFxuICAgICAgICAoaXRlbSkgPT4gSlNPTi5zdHJpbmdpZnkoaXRlbSkgPT09IEpTT04uc3RyaW5naWZ5KGNvb3JkKVxuICAgICAgKTtcbiAgICB9LFxuICB9O1xufTtcblxuZXhwb3J0IHsgU2hpcCB9O1xuIiwiaW1wb3J0IHsgR2FtZUJvYXJkIH0gZnJvbSBcIi4vR2FtZUJvYXJkXCI7XG5cbmNsYXNzIFBsYXllciB7XG4gIGNvbnN0cnVjdG9yKGlkID0gXCJwbGF5ZXJcIikge1xuICAgIHRoaXMubXlCb2FyZCA9IEdhbWVCb2FyZCgpO1xuICAgIHRoaXMuZW5lbXk7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMuY3VycmVudFR1cm4gPSBmYWxzZTtcbiAgfVxuXG4gIHNldEVuZW15KHBsYXllcikge1xuICAgIHRoaXMuZW5lbXkgPSBwbGF5ZXI7XG4gIH1cblxuICBzZXRDdXJyZW50KHR1cm4pIHtcbiAgICB0aGlzLmN1cnJlbnRUdXJuID0gdHVybjtcbiAgfVxuXG4gIGF0dGFjayh4LCB5KSB7XG4gICAgcmV0dXJuIHRoaXMuZW5lbXkucmVjZWl2ZSh4LCB5KTtcbiAgfVxuXG4gIGNvbXBTaGlwcygpIHtcbiAgICBpZiAodGhpcy5pZCAhPT0gXCJjb21wXCIpIHJldHVybjtcbiAgICB0aGlzLm15Qm9hcmQuYXV0b21hdGljU2hpcHMoKTtcbiAgfVxuXG4gIGNvbXBBdHRhY2soKSB7XG4gICAgaWYgKHRoaXMuaWQgIT09IFwiY29tcFwiKSByZXR1cm47XG4gICAgbGV0IGxlZ2FsTW92ZXMgPSB0aGlzLmVuZW15Lm15Qm9hcmQubGVnYWxNb3ZlcztcbiAgICBsZXQgW3gsIHldID0gbGVnYWxNb3Zlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsZWdhbE1vdmVzLmxlbmd0aCldO1xuICAgIHJldHVybiB0aGlzLmVuZW15LnJlY2VpdmUoeCwgeSk7XG4gIH1cblxuICByZWNlaXZlKHgsIHkpIHtcbiAgICBpZiAodGhpcy5teUJvYXJkLmlzSWxsZWdhbCh4LCB5KSkgcmV0dXJuIFwiSWxsZWdhbCBNb3ZlXCI7XG4gICAgbGV0IGhpdCA9IHRoaXMubXlCb2FyZC5yZWNlaXZlQXR0YWNrKHgsIHkpO1xuICAgIGlmIChoaXQgIT09IHRydWUpIHtcbiAgICAgIHRoaXMuY3VycmVudFR1cm4gPSB0cnVlO1xuICAgICAgdGhpcy5lbmVteS5zZXRDdXJyZW50KGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIFxuICB9XG59XG5cbmV4cG9ydCB7IFBsYXllciB9O1xuIiwiaW1wb3J0IHsgU2hpcCB9IGZyb20gXCIuL1NoaXBcIjtcblxuY29uc3QgR2FtZUJvYXJkID0gZnVuY3Rpb24gKCkge1xuICBsZXQgbGVnYWxNb3ZlcyA9IFtdO1xuICBsZXQgbGVnYWxQbGFjZW1lbnRzID0gW107XG4gIGZvciAobGV0IHggPSAwOyB4IDwgMTA7IHgrKykge1xuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgMTA7IHkrKykge1xuICAgICAgbGVnYWxNb3Zlcy5wdXNoKFt4LCB5XSk7XG4gICAgICBsZWdhbFBsYWNlbWVudHMucHVzaChbeCwgeV0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc2hpcHM6IFtdLFxuICAgIG1pc3NlZDogW10sXG4gICAgdHlwZXM6IFtcbiAgICAgIHsgdHlwZTogXCJDYXJyaWVyXCIsIGxlbjogNSB9LFxuICAgICAgeyB0eXBlOiBcIkJhdHRsZXNoaXBcIiwgbGVuOiA0IH0sXG4gICAgICB7IHR5cGU6IFwiRGVzdHJveWVyXCIsIGxlbjogMyB9LFxuICAgICAgeyB0eXBlOiBcIlN1Ym1hcmluZVwiLCBsZW46IDMgfSxcbiAgICAgIHsgdHlwZTogXCJQYXRyb2wgQm9hdFwiLCBsZW46IDIgfSxcbiAgICBdLFxuICAgIGxlZ2FsUGxhY2VtZW50cyxcbiAgICBsZWdhbE1vdmVzLFxuXG4gICAgYXV0b21hdGljU2hpcHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMudHlwZXMuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgICBjb25zdCBheGlzID0gW1wieFwiLCBcInlcIl1bTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMildO1xuICAgICAgICBsZXQgY29vcmRzID0gW107XG4gICAgICAgIHdoaWxlICghdGhpcy5jYW5QbGFjZVNoaXAoY29vcmRzKSkge1xuICAgICAgICAgIGNvb3JkcyA9IFtdO1xuICAgICAgICAgIGxldCBbeCwgeV0gPVxuICAgICAgICAgICAgdGhpcy5sZWdhbFBsYWNlbWVudHNbXG4gICAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMubGVnYWxQbGFjZW1lbnRzLmxlbmd0aClcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgaWYgKGF4aXMgPT09IFwieFwiKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0geTsgaSA8IHkgKyB0eXBlLmxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgIGNvb3Jkcy5wdXNoKFt4LCBpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB4OyBpIDwgeCArIHR5cGUubGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgY29vcmRzLnB1c2goW2ksIHldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGluZm8gPSB7XG4gICAgICAgICAgY29vcmRzLFxuICAgICAgICAgIGF4aXMsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2hpcHMucHVzaChTaGlwKGluZm8pKTtcbiAgICAgICAgdGhpcy51cGRhdGVMZWdhbFBsYWNlbWVudHMoaW5mbyk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgcGxhY2VTaGlwOiBmdW5jdGlvbiAoaW5mbykge1xuICAgICAgdGhpcy5zaGlwcy5wdXNoKFNoaXAoaW5mbykpO1xuICAgICAgdGhpcy51cGRhdGVMZWdhbFBsYWNlbWVudHMoaW5mbyk7XG4gICAgfSxcblxuICAgIGNhblBsYWNlU2hpcDogZnVuY3Rpb24gKGNvb3Jkcykge1xuICAgICAgaWYgKGNvb3Jkcy5sZW5ndGggPCAyKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gY29vcmRzLmV2ZXJ5KChjb29yZCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWdhbFBsYWNlbWVudHMuc29tZSgobGVnYWxQbGFjZSkgPT4ge1xuICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShjb29yZCkgPT09IEpTT04uc3RyaW5naWZ5KGxlZ2FsUGxhY2UpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICB1cGRhdGVMZWdhbFBsYWNlbWVudHM6IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICBsZXQgbGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaW5mby5jb29yZHMpKTtcbiAgICAgIGxldCBbYSwgYl0gPSBpbmZvLmNvb3Jkc1swXTtcbiAgICAgIGxldCBbeSwgel0gPSBpbmZvLmNvb3Jkc1tpbmZvLmNvb3Jkcy5sZW5ndGggLSAxXTtcblxuICAgICAgaWYgKGluZm8uYXhpcyA9PT0gXCJ5XCIpIHtcbiAgICAgICAgbGlzdC5wdXNoKFthIC0gMSwgYl0sIFt5ICsgMSwgel0pO1xuICAgICAgICBsaXN0LmZvckVhY2goKFt4LCB5XSkgPT4ge1xuICAgICAgICAgIGxpc3QucHVzaChbeCwgeSAtIDFdLCBbeCwgeSArIDFdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGluZm8uY29vcmRzLmZvckVhY2goKFt4LCB5XSkgPT4ge1xuICAgICAgICAgIGxpc3QucHVzaChbeCwgeSAtIDFdLCBbeCwgeSArIDFdKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaXN0LnB1c2goW2EsIGIgLSAxXSwgW3ksIHogKyAxXSk7XG4gICAgICAgIGxpc3QuZm9yRWFjaCgoW3gsIHldKSA9PiB7XG4gICAgICAgICAgbGlzdC5wdXNoKFt4IC0gMSwgeV0sIFt4ICsgMSwgeV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaW5mby5jb29yZHMuZm9yRWFjaCgoW3gsIHldKSA9PiB7XG4gICAgICAgICAgbGlzdC5wdXNoKFt4IC0gMSwgeV0sIFt4ICsgMSwgeV0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgbGV0IGFyciA9IHRoaXMubGVnYWxQbGFjZW1lbnRzLmZpbHRlcigoY29vcmQpID0+IHtcbiAgICAgICAgcmV0dXJuIGxpc3QuZXZlcnkoXG4gICAgICAgICAgKGl0ZW0pID0+IEpTT04uc3RyaW5naWZ5KGNvb3JkKSAhPT0gSlNPTi5zdHJpbmdpZnkoaXRlbSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmxlZ2FsUGxhY2VtZW50cyA9IGFycjtcbiAgICB9LFxuXG4gICAgcmVjZWl2ZUF0dGFjazogZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgIGxldCBoaXQgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2hpcHMuZXZlcnkoKHNoaXApID0+IHtcbiAgICAgICAgaWYgKHNoaXAuY29udGFpbnMoW3gsIHldLCBcImNvb3Jkc1wiKSkge1xuICAgICAgICAgIHNoaXAucHJvY2Vzc0hpdChbeCwgeV0pO1xuICAgICAgICAgIGhpdCA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChoaXQgPT09IGZhbHNlKSB0aGlzLm1pc3NlZC5wdXNoKFt4LCB5XSk7XG4gICAgICB0aGlzLnVwZGF0ZUxlZ2FsKHgsIHkpO1xuICAgICAgcmV0dXJuIGhpdDtcbiAgICB9LFxuXG4gICAgYWxsU3VuazogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2hpcHMuZXZlcnkoKHNoaXApID0+IHtcbiAgICAgICAgcmV0dXJuIHNoaXAuaXNTdW5rKCk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgdXBkYXRlTGVnYWw6IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICBsZXQgYXJyID0gdGhpcy5sZWdhbE1vdmVzLmZpbHRlcihcbiAgICAgICAgKGNvb3JkKSA9PiBKU09OLnN0cmluZ2lmeShjb29yZCkgIT09IEpTT04uc3RyaW5naWZ5KFt4LCB5XSlcbiAgICAgICk7XG5cbiAgICAgIHRoaXMubGVnYWxNb3ZlcyA9IGFycjtcbiAgICB9LFxuXG4gICAgaXNJbGxlZ2FsOiBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgcmV0dXJuIHRoaXMubGVnYWxNb3Zlcy5ldmVyeSgoY29vcmQpID0+IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGNvb3JkKSAhPT0gSlNPTi5zdHJpbmdpZnkoW3gsIHldKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gIH07XG59O1xuXG5leHBvcnQgeyBHYW1lQm9hcmQgfTtcbiIsImltcG9ydCB7IHJ1bkdhbWUgfSBmcm9tIFwiLi9ydW5HYW1lXCI7XG5cbmNvbnN0IHJlbmRlckdhbWUgPSAoZnVuY3Rpb24gKCkge1xuICBsZXQgaHRtbCA9IGA8ZGl2IGNsYXNzPVwibWFpbi10aXRsZVwiPkJhdHRsZXNoaXA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cImJvYXJkXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiYm9hcmQtb25lXCI+PC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwiYm9hcmRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJib2FyZC10d29cIj48L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9XCJvdmVybGF5XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWhlYWRpbmdcIj5XZWxjb21lIHRvIEJhdHRsZXNoaXAhPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtdGV4dFwiPjwvZGl2PlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJyb3RhdGUtYnRuXCI+Um90YXRlPC9idXR0b24+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInBsYWNpbmctYm9hcmRcIj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICA8L2Rpdj5gO1xuXG4gIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gaHRtbDtcblxuICBjb25zdCBib2FyZE9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm9hcmQtb25lXCIpO1xuICBjb25zdCBib2FyZFR3byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm9hcmQtdHdvXCIpO1xuICBjb25zdCBwbGFjaW5nQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNpbmctYm9hcmRcIik7XG4gIGNvbnN0IHJvdGF0ZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucm90YXRlLWJ0blwiKTtcbiAgbGV0IGZyZXNoQ29vcmRzID0gW107XG5cbiAgbGV0IGF4aXMgPSBcInhcIjtcbiAgcm90YXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGF4aXMgPT09IFwieVwiID8gKGF4aXMgPSBcInhcIikgOiAoYXhpcyA9IFwieVwiKTtcbiAgfSk7XG5cbiAgZm9yIChsZXQgeCA9IDA7IHggPCAxMDsgeCsrKSB7XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCAxMDsgeSsrKSB7XG4gICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcImJvYXJkLWl0ZW1cIik7XG4gICAgICBpdGVtLmRhdGFzZXQuY29vcmQgPSBbeSwgeF0uam9pbihcIlwiKTtcbiAgICAgIGJvYXJkT25lLmFwcGVuZENoaWxkKGl0ZW0pO1xuICAgICAgYm9hcmRUd28uYXBwZW5kQ2hpbGQoaXRlbS5jbG9uZU5vZGUoKSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgbG9hZFBsYWNpbmdCb2FyZCA9IGZ1bmN0aW9uIChwMSkge1xuICAgIHBsYWNpbmdCb2FyZC5pbm5lckhUTUwgPSBcIlwiO1xuICAgIGZvciAobGV0IHggPSAwOyB4IDwgMTA7IHgrKykge1xuICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCAxMDsgeSsrKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJib2FyZC1pdGVtXCIsIFwiaW52YWxpZC1wbGFjZW1lbnRcIik7XG4gICAgICAgIGl0ZW0uZGF0YXNldC5jb29yZCA9IFt5LCB4XS5qb2luKFwiXCIpO1xuICAgICAgICBwbGFjaW5nQm9hcmQuYXBwZW5kQ2hpbGQoaXRlbSk7XG4gICAgICB9XG4gICAgfVxuICAgIHAxLm15Qm9hcmQubGVnYWxQbGFjZW1lbnRzLmZvckVhY2goKFt4LCB5XSkgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGAucGxhY2luZy1ib2FyZCA+IFtkYXRhLWNvb3JkPVwiJHt4fSR7eX1cImBcbiAgICAgICk7XG4gICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJpbnZhbGlkLXBsYWNlbWVudFwiKTtcbiAgICB9KTtcblxuICAgIHAxLm15Qm9hcmQuc2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgc2hpcC5jb29yZHMuZm9yRWFjaCgoW3gsIHldKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgIGAucGxhY2luZy1ib2FyZCA+IFtkYXRhLWNvb3JkPVwiJHt4fSR7eX1cImBcbiAgICAgICAgKTtcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiaW52YWxpZC1wbGFjZW1lbnRcIik7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcInNoaXBcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCByZW5kZXJQbGFjaW5nQm9hcmQgPSBmdW5jdGlvbiAocDEpIHtcbiAgICBwbGFjZVNoaXAocDEsIDApO1xuICB9O1xuXG4gIGNvbnN0IHBsYWNlU2hpcCA9IGZ1bmN0aW9uIChwMSwgaW5kZXgpIHtcbiAgICBsb2FkUGxhY2luZ0JvYXJkKHAxKTtcbiAgICBjb25zdCBib2FyZEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgIFwiLnBsYWNpbmctYm9hcmQgPiAuYm9hcmQtaXRlbVwiXG4gICAgKTtcbiAgICBjb25zdCBjYXJkVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZC10ZXh0XCIpO1xuICAgIGNvbnN0IHR5cGUgPSBwMS5teUJvYXJkLnR5cGVzW2luZGV4XTtcbiAgICBjYXJkVGV4dC50ZXh0Q29udGVudCA9IGBQbGFjZSB5b3VyICR7dHlwZS50eXBlfWA7XG5cbiAgICBib2FyZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJtb3VzZW92ZXJcIixcbiAgICAgICAgaGFuZGxlTW91c2VPdmVyLmJpbmQobnVsbCwgaXRlbSwgdHlwZSwgcDEpXG4gICAgICApO1xuICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgaGFuZGxlTW91c2VPdXQpO1xuICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ2xpY2suYmluZChudWxsLCBwMSwgdHlwZSwgaW5kZXgpKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVNb3VzZU92ZXIgPSBmdW5jdGlvbiAoaXRlbSwgdHlwZSwgcDEpIHtcbiAgICBjb25zdCBbeCwgeV0gPSBpdGVtLmRhdGFzZXQuY29vcmQuc3BsaXQoXCJcIikubWFwKE51bWJlcik7XG4gICAgbGV0IGNvb3JkcyA9IFtdO1xuICAgIGlmIChheGlzID09PSBcInlcIikge1xuICAgICAgZm9yIChsZXQgaSA9IHg7IGkgPCB4ICsgdHlwZS5sZW47IGkrKykge1xuICAgICAgICBjb29yZHMucHVzaChbaSwgeV0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0geTsgaSA8IHkgKyB0eXBlLmxlbjsgaSsrKSB7XG4gICAgICAgIGNvb3Jkcy5wdXNoKFt4LCBpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwMS5teUJvYXJkLmNhblBsYWNlU2hpcChjb29yZHMpKSB7XG4gICAgICBjb29yZHMuZm9yRWFjaCgoW2ksIHldKSA9PiB7XG4gICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoYC5wbGFjaW5nLWJvYXJkID4gW2RhdGEtY29vcmQ9XCIke1tpLCB5XS5qb2luKFwiXCIpfVwiXWApXG4gICAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJob3ZlclwiKTtcbiAgICAgIH0pO1xuICAgICAgZnJlc2hDb29yZHMgPSBjb29yZHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBbeCwgeV0gPSBjb29yZHNbMF07XG4gICAgICBkb2N1bWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihgLnBsYWNpbmctYm9hcmQgPiBbZGF0YS1jb29yZD1cIiR7W3gsIHldLmpvaW4oXCJcIil9XCJdYClcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJpbnZhbGlkLWhvdmVyXCIpO1xuICAgICAgZnJlc2hDb29yZHMgPSBbXTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTW91c2VPdXQgPSBmdW5jdGlvbiAoZSkge1xuICAgIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3RvckFsbChcIi5ob3ZlclwiKVxuICAgICAgLmZvckVhY2goKGl0ZW0pID0+IGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImhvdmVyXCIpKTtcbiAgICBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaW52YWxpZC1ob3ZlclwiKVxuICAgICAgLmZvckVhY2goKGl0ZW0pID0+IGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImludmFsaWQtaG92ZXJcIikpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUNsaWNrID0gZnVuY3Rpb24gKHAxLCB0eXBlLCBpbmRleCkge1xuICAgIGlmICghcDEubXlCb2FyZC5jYW5QbGFjZVNoaXAoZnJlc2hDb29yZHMpKSByZXR1cm47XG5cbiAgICBwMS5teUJvYXJkLnBsYWNlU2hpcCh7XG4gICAgICBjb29yZHM6IGZyZXNoQ29vcmRzLFxuICAgICAgYXhpcyxcbiAgICB9KTtcblxuICAgIGlmICh0eXBlLnR5cGUgPT09IFwiUGF0cm9sIEJvYXRcIikge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpLnJlbW92ZSgpO1xuICAgICAgcnVuR2FtZS5nYW1lTG9vcCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwbGFjZVNoaXAocDEsIGluZGV4ICsgMSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlbmRlciA9IGZ1bmN0aW9uIChwMSwgcDIpIHtcbiAgICByZW5kZXJQbGF5ZXIocDEpO1xuICAgIHJlbmRlclBsYXllcihwMik7XG4gIH07XG5cbiAgY29uc3QgcmVuZGVyUGxheWVyID0gZnVuY3Rpb24gKHBsYXllcikge1xuICAgIGxldCBudW07XG4gICAgaWYgKHBsYXllci5pZCA9PT0gXCJwbGF5ZXJcIikge1xuICAgICAgbnVtID0gXCJvbmVcIjtcbiAgICAgIHBsYXllci5teUJvYXJkLnNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgc2hpcC5jb29yZHMuZm9yRWFjaCgoY29vcmQpID0+IHtcbiAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoYC5ib2FyZC0ke251bX0gPiBbZGF0YS1jb29yZD1cIiR7Y29vcmQuam9pbihcIlwiKX1cIl1gKVxuICAgICAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJzaGlwXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBudW0gPSBcInR3b1wiO1xuICAgIH1cblxuICAgIHBsYXllci5teUJvYXJkLm1pc3NlZC5mb3JFYWNoKChtaXNzKSA9PiB7XG4gICAgICBkb2N1bWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihgLmJvYXJkLSR7bnVtfSA+IFtkYXRhLWNvb3JkPVwiJHttaXNzLmpvaW4oXCJcIil9XCJdYClcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJtaXNzZWRcIik7XG4gICAgfSk7XG5cbiAgICBwbGF5ZXIubXlCb2FyZC5zaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICBzaGlwLmhpdC5mb3JFYWNoKChoaXQpID0+IHtcbiAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcihgLmJvYXJkLSR7bnVtfSA+IFtkYXRhLWNvb3JkPVwiJHtoaXQuam9pbihcIlwiKX1cIl1gKVxuICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiaGl0XCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgZW5kR2FtZSA9IGZ1bmN0aW9uICh3aW5uZXIpIHtcbiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJvdmVybGF5XCIpO1xuICAgIG92ZXJsYXkuaW5uZXJIVE1MID0gYFxuICAgIDxkaXYgY2xhc3M9XCJvdmVybGF5XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJlbmQtY2FyZFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtaGVhZGluZ1wiPiR7d2lubmVyfTwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInJlc3RhcnQtYnRuXCI+UGxheSBBZ2FpbjwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5gO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICByZW5kZXIsXG4gICAgcmVuZGVyUGxhY2luZ0JvYXJkLFxuICAgIGVuZEdhbWUsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyByZW5kZXJHYW1lIH07XG4iLCJpbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9QbGF5ZXJcIjtcbmltcG9ydCB7IHJlbmRlckdhbWUgfSBmcm9tIFwiLi9yZW5kZXJHYW1lXCI7XG5cbmNvbnN0IHJ1bkdhbWUgPSAoZnVuY3Rpb24gKCkge1xuICBsZXQgcGxheWVyO1xuICBsZXQgY29tcHV0ZXI7XG5cbiAgY29uc3QgaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBwbGF5ZXIgPSBuZXcgUGxheWVyKCk7XG4gICAgY29tcHV0ZXIgPSBuZXcgUGxheWVyKFwiY29tcFwiKTtcbiAgICBwbGF5ZXIuc2V0RW5lbXkoY29tcHV0ZXIpO1xuICAgIGNvbXB1dGVyLnNldEVuZW15KHBsYXllcik7XG4gICAgcGxheWVyLnNldEN1cnJlbnQodHJ1ZSk7XG4gICAgcGxhY2VTaGlwcygpO1xuICB9O1xuXG4gIGNvbnN0IHBsYWNlU2hpcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29tcHV0ZXIuY29tcFNoaXBzKCk7XG4gICAgcmVuZGVyR2FtZS5yZW5kZXJQbGFjaW5nQm9hcmQocGxheWVyKTtcbiAgfTtcblxuICBjb25zdCBnYW1lTG9vcCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZW5kZXJHYW1lLnJlbmRlcihwbGF5ZXIsIGNvbXB1dGVyKTtcblxuICAgIGlmIChwbGF5ZXIuY3VycmVudFR1cm4gPT09IHRydWUpIHtcbiAgICAgIGNvbXB1dGVyLm15Qm9hcmQubGVnYWxNb3Zlcy5mb3JFYWNoKChsZWdhbE1vdmUpID0+IHtcbiAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcihgLmJvYXJkLXR3byA+IFtkYXRhLWNvb3JkPVwiJHtsZWdhbE1vdmUuam9pbihcIlwiKX1cIl1gKVxuICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcHJvY2Vzc0NsaWNrKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHByb2Nlc3NDbGljaygpO1xuICB9O1xuXG4gIGNvbnN0IHByb2Nlc3NDbGljayA9IGZ1bmN0aW9uIChlID0gXCJudWxsXCIpIHtcbiAgICBpZiAocGxheWVyLmN1cnJlbnRUdXJuID09PSB0cnVlKSB7XG4gICAgICBsZXQgW3gsIHldID0gZS50YXJnZXQuZGF0YXNldC5jb29yZC5zcGxpdChcIlwiKS5tYXAoTnVtYmVyKTtcbiAgICAgIHBsYXllci5hdHRhY2soeCwgeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbXB1dGVyLmNvbXBBdHRhY2soKTtcbiAgICB9XG4gICAgbGV0IHdpbm5lciA9IGVuZEdhbWUoKTtcbiAgICBpZiAod2lubmVyKSB7XG4gICAgICByZW5kZXJHYW1lLmVuZEdhbWUod2lubmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2FtZUxvb3AoKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZW5kR2FtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgd2lubmVyO1xuICAgIGlmIChwbGF5ZXIubXlCb2FyZC5hbGxTdW5rKCkpIHtcbiAgICAgIHdpbm5lciA9IFwiQ29tcHV0ZXIgV2lucyEgQmV0dGVyIGx1Y2sgbmV4dCB0aW1lLlwiO1xuICAgIH0gZWxzZSBpZiAoY29tcHV0ZXIubXlCb2FyZC5hbGxTdW5rKCkpIHtcbiAgICAgIHdpbm5lciA9IFwiQ29uZ3JhdHVsYXRpb25zISBZb3Ugd2luLlwiO1xuICAgIH0gZWxzZSB3aW5uZXIgPSBmYWxzZTtcbiAgICByZXR1cm4gd2lubmVyO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdGlhbGl6ZSxcbiAgICBnYW1lTG9vcCxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IHJ1bkdhbWUgfTtcbiIsImltcG9ydCB7IHJ1bkdhbWUgfSBmcm9tIFwiLi9tb2R1bGVzL3J1bkdhbWVcIjtcblxucnVuR2FtZS5pbml0aWFsaXplKCk7Il0sIm5hbWVzIjpbIlNoaXAiLCJpbmZvIiwiY29vcmRzIiwiaGl0IiwicHJvY2Vzc0hpdCIsImNvb3JkIiwidGhpcyIsInB1c2giLCJpc1N1bmsiLCJsZW5ndGgiLCJjb250YWlucyIsIm9iaiIsInNvbWUiLCJpdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsIlBsYXllciIsImNvbnN0cnVjdG9yIiwiaWQiLCJteUJvYXJkIiwibGVnYWxNb3ZlcyIsImxlZ2FsUGxhY2VtZW50cyIsIngiLCJ5Iiwic2hpcHMiLCJtaXNzZWQiLCJ0eXBlcyIsInR5cGUiLCJsZW4iLCJhdXRvbWF0aWNTaGlwcyIsImZvckVhY2giLCJheGlzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY2FuUGxhY2VTaGlwIiwiaSIsInVwZGF0ZUxlZ2FsUGxhY2VtZW50cyIsInBsYWNlU2hpcCIsImV2ZXJ5IiwibGVnYWxQbGFjZSIsImxpc3QiLCJwYXJzZSIsImEiLCJiIiwieiIsImFyciIsImZpbHRlciIsInJlY2VpdmVBdHRhY2siLCJzaGlwIiwidXBkYXRlTGVnYWwiLCJhbGxTdW5rIiwiaXNJbGxlZ2FsIiwiR2FtZUJvYXJkIiwiZW5lbXkiLCJjdXJyZW50VHVybiIsInNldEVuZW15IiwicGxheWVyIiwic2V0Q3VycmVudCIsInR1cm4iLCJhdHRhY2siLCJyZWNlaXZlIiwiY29tcFNoaXBzIiwiY29tcEF0dGFjayIsInJlbmRlckdhbWUiLCJkb2N1bWVudCIsImJvZHkiLCJpbm5lckhUTUwiLCJib2FyZE9uZSIsInF1ZXJ5U2VsZWN0b3IiLCJib2FyZFR3byIsInBsYWNpbmdCb2FyZCIsInJvdGF0ZUJ0biIsImZyZXNoQ29vcmRzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiZGF0YXNldCIsImpvaW4iLCJhcHBlbmRDaGlsZCIsImNsb25lTm9kZSIsInAxIiwiaW5kZXgiLCJyZW1vdmUiLCJsb2FkUGxhY2luZ0JvYXJkIiwiYm9hcmRJdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjYXJkVGV4dCIsInRleHRDb250ZW50IiwiaGFuZGxlTW91c2VPdmVyIiwiYmluZCIsImhhbmRsZU1vdXNlT3V0IiwiaGFuZGxlQ2xpY2siLCJzcGxpdCIsIm1hcCIsIk51bWJlciIsInJ1bkdhbWUiLCJnYW1lTG9vcCIsInJlbmRlclBsYXllciIsIm51bSIsIm1pc3MiLCJyZW5kZXIiLCJwMiIsInJlbmRlclBsYWNpbmdCb2FyZCIsImVuZEdhbWUiLCJ3aW5uZXIiLCJvdmVybGF5IiwiY29tcHV0ZXIiLCJwcm9jZXNzQ2xpY2siLCJsZWdhbE1vdmUiLCJ0YXJnZXQiLCJpbml0aWFsaXplIl0sInNvdXJjZVJvb3QiOiIifQ==