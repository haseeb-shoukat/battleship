(()=>{"use strict";class t{constructor(t="player"){this.myBoard=function(){let t=[];for(let e=0;e<10;e++)for(let r=0;r<10;r++)t.push([e,r]);return{ships:[],missed:[],legalMoves:t,placeShip:function(t){this.ships.push(function(t,e){return{id:t,coords:e,hit:[],processHit:function(t){this.hit.push(t)},isSunk:function(){return this.hit.length===this.coords.length},contains:function(t,e){let r=!1;return this[e].forEach((e=>{e[0]!==t[0]||e[1]!==t[1]||(r=!0)})),r}}}(this.ships.length,t))},receiveAttack:function(t,e){let r=!1;return this.ships.every((n=>!n.contains([t,e],"coords")||(n.processHit([t,e]),r=!0,!1))),!1===r&&this.missed.push([t,e]),this.updateLegal(t,e),r},allSunk:function(){return this.ships.every((t=>!1!==t.isSunk()))},updateLegal:function(t,e){let r=this.legalMoves.filter((r=>JSON.stringify(r)!==JSON.stringify([t,e])));this.legalMoves=r},isIllegal:function(t,e){return this.legalMoves.every((r=>JSON.stringify(r)!==JSON.stringify([t,e])))}}}(),this.enemy,this.id=t,this.currentTurn=!1}setEnemy(t){this.enemy=t}setCurrent(t){this.currentTurn=t}attack(t,e){return this.enemy.receive(t,e)}compAttack(){if("comp"!==this.id)return;let t=this.enemy.myBoard.legalMoves,[e,r]=t[Math.floor(Math.random()*t.length)];return this.enemy.receive(e,r)}receive(t,e){if(this.myBoard.isIllegal(t,e))return"Illegal Move";!0!==this.myBoard.receiveAttack(t,e)&&(this.currentTurn=!0,this.enemy.setCurrent(!1))}}const e=function(){const t=document.querySelector(".board-one"),e=document.querySelector(".board-two");for(let r=0;r<10;r++)for(let n=0;n<10;n++){const i=document.createElement("div");i.classList.add("board-item"),i.dataset.coord=[r,n].join(""),t.appendChild(i),e.appendChild(i.cloneNode())}const r=function(t){let e;e="player"===t.id?"one":"two",t.myBoard.missed.forEach((t=>{document.querySelector(`.board-${e} > [data-coord="${t.join("")}"]`).classList.add("missed")})),t.myBoard.ships.forEach((t=>{t.hit.forEach((t=>{document.querySelector(`.board-${e} > [data-coord="${t.join("")}"]`).classList.add("hit")}))}))};return{render:function(t,e){r(t),r(e)}}}();(function(){const r=new t,n=new t("comp"),i=function(){e.render(r,n),!0!==r.currentTurn?s():n.myBoard.legalMoves.forEach((t=>{document.querySelector(`.board-two > [data-coord="${t.join("")}"]`).addEventListener("click",s)}))},s=function(t="null"){if(!0===r.currentTurn){let[e,n]=t.target.dataset.coord.split("").map(Number);r.attack(e,n)}else n.compAttack();i()};return{initialize:function(){r.setEnemy(n),n.setEnemy(r),r.setCurrent(!0),i()}}})().initialize()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUs3QixFQUFHQyxHQUFLK0QsRUFBRUMsT0FBT2hCLFFBQVF4QyxNQUFNeUQsTUFBTSxJQUFJQyxJQUFJQyxRQUNsRHJDLEVBQU9HLE9BQU9sQyxFQUFHQyxFQUNuQixNQUNFMEQsRUFBU3ZCLGFBRVh3QixHQUNGLEVBSUEsTUFBTyxDQUNMUyxXQW5DaUIsV0FDakJ0QyxFQUFPRCxTQUFTNkIsR0FDaEJBLEVBQVM3QixTQUFTQyxHQUNsQkEsRUFBT0MsWUFBVyxHQUNsQjRCLEdBQ0YsRUFnQ0QsRUF6Q2UsR0NEUlMsWSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9QbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL0dhbWVCb2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvU2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvcmVuZGVyR2FtZS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvcnVuR2FtZS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWVCb2FyZCB9IGZyb20gXCIuL0dhbWVCb2FyZFwiO1xuXG5jbGFzcyBQbGF5ZXIge1xuICBjb25zdHJ1Y3RvcihpZCA9IFwicGxheWVyXCIpIHtcbiAgICB0aGlzLm15Qm9hcmQgPSBHYW1lQm9hcmQoKTtcbiAgICB0aGlzLmVuZW15O1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLmN1cnJlbnRUdXJuID0gZmFsc2U7XG4gIH1cblxuICBzZXRFbmVteShwbGF5ZXIpIHtcbiAgICB0aGlzLmVuZW15ID0gcGxheWVyO1xuICB9XG5cbiAgc2V0Q3VycmVudCh0dXJuKSB7XG4gICAgdGhpcy5jdXJyZW50VHVybiA9IHR1cm47XG4gIH1cblxuICBhdHRhY2soeCwgeSkge1xuICAgIHJldHVybiB0aGlzLmVuZW15LnJlY2VpdmUoeCwgeSk7XG4gIH1cblxuICBjb21wQXR0YWNrKCkge1xuICAgIGlmICh0aGlzLmlkICE9PSBcImNvbXBcIikgcmV0dXJuO1xuICAgIGxldCBsZWdhbE1vdmVzID0gdGhpcy5lbmVteS5teUJvYXJkLmxlZ2FsTW92ZXM7XG4gICAgbGV0IFt4LCB5XSA9IGxlZ2FsTW92ZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbGVnYWxNb3Zlcy5sZW5ndGgpXTtcbiAgICByZXR1cm4gdGhpcy5lbmVteS5yZWNlaXZlKHgsIHkpO1xuICB9XG5cbiAgcmVjZWl2ZSh4LCB5KSB7XG4gICAgaWYgKHRoaXMubXlCb2FyZC5pc0lsbGVnYWwoeCwgeSkpIHJldHVybiBcIklsbGVnYWwgTW92ZVwiO1xuICAgIGxldCBoaXQgPSB0aGlzLm15Qm9hcmQucmVjZWl2ZUF0dGFjayh4LCB5KTtcbiAgICBpZiAoaGl0ICE9PSB0cnVlKSB7XG4gICAgICB0aGlzLmN1cnJlbnRUdXJuID0gdHJ1ZTtcbiAgICAgIHRoaXMuZW5lbXkuc2V0Q3VycmVudChmYWxzZSk7XG4gICAgfVxuICAgIHJldHVybiBcbiAgfVxufVxuXG5leHBvcnQgeyBQbGF5ZXIgfTtcbiIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9TaGlwXCI7XG5cbmNvbnN0IEdhbWVCb2FyZCA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IGxlZ2FsTW92ZXMgPSBbXTtcbiAgZm9yIChsZXQgeCA9IDA7IHggPCAxMDsgeCsrKSB7XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCAxMDsgeSsrKSB7XG4gICAgICBsZWdhbE1vdmVzLnB1c2goW3gsIHldKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNoaXBzOiBbXSxcbiAgICBtaXNzZWQ6IFtdLFxuICAgIGxlZ2FsTW92ZXMsXG5cbiAgICBwbGFjZVNoaXA6IGZ1bmN0aW9uIChjb29yZHMpIHtcbiAgICAgIHRoaXMuc2hpcHMucHVzaChTaGlwKHRoaXMuc2hpcHMubGVuZ3RoLCBjb29yZHMpKTtcbiAgICB9LFxuXG4gICAgcmVjZWl2ZUF0dGFjazogZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgIGxldCBoaXQgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2hpcHMuZXZlcnkoKHNoaXApID0+IHtcbiAgICAgICAgaWYgKHNoaXAuY29udGFpbnMoW3gsIHldLCBcImNvb3Jkc1wiKSkge1xuICAgICAgICAgIHNoaXAucHJvY2Vzc0hpdChbeCwgeV0pO1xuICAgICAgICAgIGhpdCA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChoaXQgPT09IGZhbHNlKSB0aGlzLm1pc3NlZC5wdXNoKFt4LCB5XSk7XG4gICAgICB0aGlzLnVwZGF0ZUxlZ2FsKHgsIHkpO1xuICAgICAgcmV0dXJuIGhpdDtcbiAgICB9LFxuXG4gICAgYWxsU3VuazogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2hpcHMuZXZlcnkoKHNoaXApID0+IHtcbiAgICAgICAgaWYgKHNoaXAuaXNTdW5rKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHVwZGF0ZUxlZ2FsOiBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgbGV0IGFyciA9IHRoaXMubGVnYWxNb3Zlcy5maWx0ZXIoXG4gICAgICAgIChjb29yZCkgPT4gSlNPTi5zdHJpbmdpZnkoY29vcmQpICE9PSBKU09OLnN0cmluZ2lmeShbeCwgeV0pXG4gICAgICApO1xuXG4gICAgICB0aGlzLmxlZ2FsTW92ZXMgPSBhcnI7XG4gICAgfSxcblxuICAgIGlzSWxsZWdhbDogZnVuY3Rpb24oeCwgeSkge1xuICAgICAgcmV0dXJuIHRoaXMubGVnYWxNb3Zlcy5ldmVyeShjb29yZCA9PiB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShjb29yZCkgIT09IEpTT04uc3RyaW5naWZ5KFt4LCB5XSk7XG4gICAgICB9KVxuICAgIH1cbiAgfTtcbn07XG5cbmV4cG9ydCB7IEdhbWVCb2FyZCB9O1xuIiwiY29uc3QgU2hpcCA9IGZ1bmN0aW9uIChpZCwgY29vcmRzKSB7XG4gIHJldHVybiB7XG4gICAgaWQsXG4gICAgY29vcmRzLFxuICAgIGhpdDogW10sXG4gICAgcHJvY2Vzc0hpdDogZnVuY3Rpb24gKGNvb3JkKSB7XG4gICAgICB0aGlzLmhpdC5wdXNoKGNvb3JkKTtcbiAgICB9LFxuICAgIGlzU3VuazogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaGl0Lmxlbmd0aCA9PT0gdGhpcy5jb29yZHMubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH0sXG4gICAgY29udGFpbnM6IGZ1bmN0aW9uIChhcnIsIG9iaikge1xuICAgICAgbGV0IGNvbXBhcmUgPSBmYWxzZVxuICAgICAgdGhpc1tvYmpdLmZvckVhY2goKGNvb3JkKSA9PiB7XG4gICAgICAgIGlmIChjb29yZFswXSA9PT0gYXJyWzBdICYmIGNvb3JkWzFdID09PSBhcnJbMV0pIHtcbiAgICAgICAgICBjb21wYXJlID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNvbXBhcmVcbiAgICB9LFxuICB9O1xufTtcblxuZXhwb3J0IHsgU2hpcCB9O1xuIiwiY29uc3QgcmVuZGVyR2FtZSA9IChmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IGJvYXJkT25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib2FyZC1vbmVcIik7XG4gIGNvbnN0IGJvYXJkVHdvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib2FyZC10d29cIik7XG5cbiAgZm9yIChsZXQgeCA9IDA7IHggPCAxMDsgeCsrKSB7XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCAxMDsgeSsrKSB7XG4gICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcImJvYXJkLWl0ZW1cIik7XG4gICAgICBpdGVtLmRhdGFzZXQuY29vcmQgPSBbeCwgeV0uam9pbihcIlwiKTtcbiAgICAgIGJvYXJkT25lLmFwcGVuZENoaWxkKGl0ZW0pO1xuICAgICAgYm9hcmRUd28uYXBwZW5kQ2hpbGQoaXRlbS5jbG9uZU5vZGUoKSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcmVuZGVyID0gZnVuY3Rpb24gKHAxLCBwMikge1xuICAgIHJlbmRlclBsYXllcihwMSk7XG4gICAgcmVuZGVyUGxheWVyKHAyKTtcbiAgfTtcblxuICBjb25zdCByZW5kZXJQbGF5ZXIgPSBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgbGV0IG51bTtcbiAgICBpZiAocGxheWVyLmlkID09PSBcInBsYXllclwiKSB7XG4gICAgICBudW0gPSBcIm9uZVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBudW0gPSBcInR3b1wiO1xuICAgIH1cblxuICAgIHBsYXllci5teUJvYXJkLm1pc3NlZC5mb3JFYWNoKChtaXNzKSA9PiB7XG4gICAgICBkb2N1bWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihgLmJvYXJkLSR7bnVtfSA+IFtkYXRhLWNvb3JkPVwiJHttaXNzLmpvaW4oXCJcIil9XCJdYClcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJtaXNzZWRcIik7XG4gICAgfSk7XG5cbiAgICBwbGF5ZXIubXlCb2FyZC5zaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICBzaGlwLmhpdC5mb3JFYWNoKChoaXQpID0+IHtcbiAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcihgLmJvYXJkLSR7bnVtfSA+IFtkYXRhLWNvb3JkPVwiJHtoaXQuam9pbihcIlwiKX1cIl1gKVxuICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiaGl0XCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICByZW5kZXIsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyByZW5kZXJHYW1lIH07XG4iLCJpbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9QbGF5ZXJcIjtcbmltcG9ydCB7IHJlbmRlckdhbWUgfSBmcm9tIFwiLi9yZW5kZXJHYW1lXCI7XG5cbmNvbnN0IHJ1bkdhbWUgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBwbGF5ZXIgPSBuZXcgUGxheWVyKCk7XG4gIGNvbnN0IGNvbXB1dGVyID0gbmV3IFBsYXllcihcImNvbXBcIik7XG5cbiAgY29uc3QgaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBwbGF5ZXIuc2V0RW5lbXkoY29tcHV0ZXIpO1xuICAgIGNvbXB1dGVyLnNldEVuZW15KHBsYXllcik7XG4gICAgcGxheWVyLnNldEN1cnJlbnQodHJ1ZSk7XG4gICAgZ2FtZUxvb3AoKTtcbiAgfTtcblxuICBjb25zdCBnYW1lTG9vcCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZW5kZXJHYW1lLnJlbmRlcihwbGF5ZXIsIGNvbXB1dGVyKTtcblxuICAgIGlmIChwbGF5ZXIuY3VycmVudFR1cm4gPT09IHRydWUpIHtcbiAgICAgIGNvbXB1dGVyLm15Qm9hcmQubGVnYWxNb3Zlcy5mb3JFYWNoKChsZWdhbE1vdmUpID0+IHtcbiAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcihgLmJvYXJkLXR3byA+IFtkYXRhLWNvb3JkPVwiJHtsZWdhbE1vdmUuam9pbihcIlwiKX1cIl1gKVxuICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcHJvY2Vzc0NsaWNrKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHByb2Nlc3NDbGljaygpO1xuICB9O1xuXG4gIGNvbnN0IHByb2Nlc3NDbGljayA9IGZ1bmN0aW9uIChlID0gXCJudWxsXCIpIHtcbiAgICBpZiAocGxheWVyLmN1cnJlbnRUdXJuID09PSB0cnVlKSB7XG4gICAgICBsZXQgW3gsIHldID0gZS50YXJnZXQuZGF0YXNldC5jb29yZC5zcGxpdChcIlwiKS5tYXAoTnVtYmVyKTtcbiAgICAgIHBsYXllci5hdHRhY2soeCwgeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbXB1dGVyLmNvbXBBdHRhY2soKTtcbiAgICB9XG4gICAgZ2FtZUxvb3AoKTtcbiAgfTtcblxuICBjb25zdCBlbmRHYW1lID0gZnVuY3Rpb24gKCkge307XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0aWFsaXplLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IHsgcnVuR2FtZSB9O1xuIiwiaW1wb3J0IHsgcnVuR2FtZSB9IGZyb20gXCIuL21vZHVsZXMvcnVuR2FtZVwiO1xuXG5ydW5HYW1lLmluaXRpYWxpemUoKTsiXSwibmFtZXMiOlsiUGxheWVyIiwiY29uc3RydWN0b3IiLCJpZCIsInRoaXMiLCJteUJvYXJkIiwibGVnYWxNb3ZlcyIsIngiLCJ5IiwicHVzaCIsInNoaXBzIiwibWlzc2VkIiwicGxhY2VTaGlwIiwiY29vcmRzIiwiaGl0IiwicHJvY2Vzc0hpdCIsImNvb3JkIiwiaXNTdW5rIiwibGVuZ3RoIiwiY29udGFpbnMiLCJhcnIiLCJvYmoiLCJjb21wYXJlIiwiZm9yRWFjaCIsIlNoaXAiLCJyZWNlaXZlQXR0YWNrIiwiZXZlcnkiLCJzaGlwIiwidXBkYXRlTGVnYWwiLCJhbGxTdW5rIiwiZmlsdGVyIiwiSlNPTiIsInN0cmluZ2lmeSIsImlzSWxsZWdhbCIsIkdhbWVCb2FyZCIsImVuZW15IiwiY3VycmVudFR1cm4iLCJzZXRFbmVteSIsInBsYXllciIsInNldEN1cnJlbnQiLCJ0dXJuIiwiYXR0YWNrIiwicmVjZWl2ZSIsImNvbXBBdHRhY2siLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyZW5kZXJHYW1lIiwiYm9hcmRPbmUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJib2FyZFR3byIsIml0ZW0iLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiZGF0YXNldCIsImpvaW4iLCJhcHBlbmRDaGlsZCIsImNsb25lTm9kZSIsInJlbmRlclBsYXllciIsIm51bSIsIm1pc3MiLCJyZW5kZXIiLCJwMSIsInAyIiwiY29tcHV0ZXIiLCJnYW1lTG9vcCIsInByb2Nlc3NDbGljayIsImxlZ2FsTW92ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0Iiwic3BsaXQiLCJtYXAiLCJOdW1iZXIiLCJpbml0aWFsaXplIl0sInNvdXJjZVJvb3QiOiIifQ==