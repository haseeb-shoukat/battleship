(()=>{"use strict";class t{constructor(t="player"){this.myBoard=function(){let t=[];for(let e=0;e<10;e++)for(let i=0;i<10;i++)t.push([e,i]);return{ships:[],missed:[],legalMoves:t,placeShip:function(t){this.ships.push(function(t,e){return{id:t,coords:e,hit:[],processHit:function(t){this.hit.push(t)},isSunk:function(){return this.hit.length===this.coords.length},contains:function(t,e){let i=!1;return this[e].forEach((e=>{e[0]!==t[0]||e[1]!==t[1]||(i=!0)})),i}}}(this.ships.length,t))},receiveAttack:function(t,e){let i=!1;return this.ships.every((o=>!o.contains([t,e],"coords")||(o.processHit([t,e]),i=!0,!1))),!1===i&&this.missed.push([t,e]),this.updateLegal(t,e),i},allSunk:function(){return this.ships.every((t=>!1!==t.isSunk()))},updateLegal:function(t,e){let i=this.legalMoves.filter((i=>JSON.stringify(i)!==JSON.stringify([t,e])));this.legalMoves=i},isIllegal:function(t,e){return this.legalMoves.every((i=>JSON.stringify(i)!==JSON.stringify([t,e])))}}}(),this.enemy,this.id=t}setEnemy(t){this.enemy=t}attack(t,e){return this.enemy.receive(t,e)}compAttack(){if("comp"!==this.id)return;let t=this.enemy.myBoard.legalMoves,[e,i]=t[Math.floor(Math.random()*t.length)];return this.enemy.receive(e,i)}receive(t,e){return this.myBoard.isIllegal(t,e)?"Illegal Move":this.myBoard.receiveAttack(t,e)}}(function(){const e=document.querySelector(".board-one"),i=document.querySelector(".board-two"),o=new t,n=new t("comp");let s=o;const r=function(){c(),s!==o?a():n.myBoard.legalMoves.forEach((t=>{document.querySelector(`.board-two > [data-coord="${t.join("")}"]`).addEventListener("click",a)}))},c=function(){l(),d()},a=function(t="null"){let e;if(s===o){let[i,r]=t.target.dataset.coord.split("").map(Number);e=o.attack(i,r),!1===e&&(s=n)}else e=n.compAttack(),!1===e&&(s=o);r()},l=function(){const t=function(t,e){t.myBoard.missed.forEach((t=>{document.querySelector(`.board-${e} > [data-coord="${t.join("")}"]`).classList.add("missed")}))};t(o,"one"),t(n,"two")},d=function(){const t=function(t,e){t.myBoard.ships.forEach((t=>{t.hit.forEach((t=>{document.querySelector(`.board-${e} > [data-coord="${t.join("")}"]`).classList.add("hit")}))}))};t(o,"one"),t(n,"two")};return{initialize:function(){o.setEnemy(n),n.setEnemy(o),o.myBoard.legalMoves.forEach((t=>{const o=document.createElement("div");o.classList.add("board-item"),o.dataset.coord=t.join(""),e.appendChild(o),i.appendChild(o.cloneNode())})),r()}}})().initialize()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SixVQUFVQyxJQUFJLGNBQ25CRyxFQUFLWixRQUFRN0MsTUFBUUEsRUFBTXNDLEtBQUssSUFDaENWLEVBQVMrQixZQUFZRixHQUNyQjFCLEVBQVM0QixZQUFZRixFQUFLRyxZQUFZLElBR3hDMUIsR0FDRixFQW9FRCxFQXhGZSxHQ0FSc0IsWSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9QbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL0dhbWVCb2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvU2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvcnVuR2FtZS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWVCb2FyZCB9IGZyb20gXCIuL0dhbWVCb2FyZFwiO1xuXG5jbGFzcyBQbGF5ZXIge1xuICBjb25zdHJ1Y3RvcihpZCA9IFwicGxheWVyXCIpIHtcbiAgICB0aGlzLm15Qm9hcmQgPSBHYW1lQm9hcmQoKTtcbiAgICB0aGlzLmVuZW15O1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgfVxuXG4gIHNldEVuZW15KHBsYXllcikge1xuICAgIHRoaXMuZW5lbXkgPSBwbGF5ZXI7XG4gIH1cblxuICBhdHRhY2soeCwgeSkge1xuICAgIHJldHVybiB0aGlzLmVuZW15LnJlY2VpdmUoeCwgeSk7XG4gIH1cblxuICBjb21wQXR0YWNrKCkge1xuICAgIGlmICh0aGlzLmlkICE9PSBcImNvbXBcIikgcmV0dXJuO1xuICAgIGxldCBsZWdhbE1vdmVzID0gdGhpcy5lbmVteS5teUJvYXJkLmxlZ2FsTW92ZXM7XG4gICAgbGV0IFt4LCB5XSA9IGxlZ2FsTW92ZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbGVnYWxNb3Zlcy5sZW5ndGgpXTtcbiAgICByZXR1cm4gdGhpcy5lbmVteS5yZWNlaXZlKHgsIHkpO1xuICB9XG5cbiAgcmVjZWl2ZSh4LCB5KSB7XG4gICAgaWYgKHRoaXMubXlCb2FyZC5pc0lsbGVnYWwoeCwgeSkpIHJldHVybiBcIklsbGVnYWwgTW92ZVwiO1xuICAgIHJldHVybiB0aGlzLm15Qm9hcmQucmVjZWl2ZUF0dGFjayh4LCB5KTtcbiAgfVxufVxuXG5leHBvcnQgeyBQbGF5ZXIgfTtcbiIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9TaGlwXCI7XG5cbmNvbnN0IEdhbWVCb2FyZCA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IGxlZ2FsTW92ZXMgPSBbXTtcbiAgZm9yIChsZXQgeCA9IDA7IHggPCAxMDsgeCsrKSB7XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCAxMDsgeSsrKSB7XG4gICAgICBsZWdhbE1vdmVzLnB1c2goW3gsIHldKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNoaXBzOiBbXSxcbiAgICBtaXNzZWQ6IFtdLFxuICAgIGxlZ2FsTW92ZXMsXG5cbiAgICBwbGFjZVNoaXA6IGZ1bmN0aW9uIChjb29yZHMpIHtcbiAgICAgIHRoaXMuc2hpcHMucHVzaChTaGlwKHRoaXMuc2hpcHMubGVuZ3RoLCBjb29yZHMpKTtcbiAgICB9LFxuXG4gICAgcmVjZWl2ZUF0dGFjazogZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgIGxldCBoaXQgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2hpcHMuZXZlcnkoKHNoaXApID0+IHtcbiAgICAgICAgaWYgKHNoaXAuY29udGFpbnMoW3gsIHldLCBcImNvb3Jkc1wiKSkge1xuICAgICAgICAgIHNoaXAucHJvY2Vzc0hpdChbeCwgeV0pO1xuICAgICAgICAgIGhpdCA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChoaXQgPT09IGZhbHNlKSB0aGlzLm1pc3NlZC5wdXNoKFt4LCB5XSk7XG4gICAgICB0aGlzLnVwZGF0ZUxlZ2FsKHgsIHkpO1xuICAgICAgcmV0dXJuIGhpdDtcbiAgICB9LFxuXG4gICAgYWxsU3VuazogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2hpcHMuZXZlcnkoKHNoaXApID0+IHtcbiAgICAgICAgaWYgKHNoaXAuaXNTdW5rKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHVwZGF0ZUxlZ2FsOiBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgbGV0IGFyciA9IHRoaXMubGVnYWxNb3Zlcy5maWx0ZXIoXG4gICAgICAgIChjb29yZCkgPT4gSlNPTi5zdHJpbmdpZnkoY29vcmQpICE9PSBKU09OLnN0cmluZ2lmeShbeCwgeV0pXG4gICAgICApO1xuXG4gICAgICB0aGlzLmxlZ2FsTW92ZXMgPSBhcnI7XG4gICAgfSxcblxuICAgIGlzSWxsZWdhbDogZnVuY3Rpb24oeCwgeSkge1xuICAgICAgcmV0dXJuIHRoaXMubGVnYWxNb3Zlcy5ldmVyeShjb29yZCA9PiB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShjb29yZCkgIT09IEpTT04uc3RyaW5naWZ5KFt4LCB5XSk7XG4gICAgICB9KVxuICAgIH1cbiAgfTtcbn07XG5cbmV4cG9ydCB7IEdhbWVCb2FyZCB9O1xuIiwiY29uc3QgU2hpcCA9IGZ1bmN0aW9uIChpZCwgY29vcmRzKSB7XG4gIHJldHVybiB7XG4gICAgaWQsXG4gICAgY29vcmRzLFxuICAgIGhpdDogW10sXG4gICAgcHJvY2Vzc0hpdDogZnVuY3Rpb24gKGNvb3JkKSB7XG4gICAgICB0aGlzLmhpdC5wdXNoKGNvb3JkKTtcbiAgICB9LFxuICAgIGlzU3VuazogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaGl0Lmxlbmd0aCA9PT0gdGhpcy5jb29yZHMubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH0sXG4gICAgY29udGFpbnM6IGZ1bmN0aW9uIChhcnIsIG9iaikge1xuICAgICAgbGV0IGNvbXBhcmUgPSBmYWxzZVxuICAgICAgdGhpc1tvYmpdLmZvckVhY2goKGNvb3JkKSA9PiB7XG4gICAgICAgIGlmIChjb29yZFswXSA9PT0gYXJyWzBdICYmIGNvb3JkWzFdID09PSBhcnJbMV0pIHtcbiAgICAgICAgICBjb21wYXJlID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNvbXBhcmVcbiAgICB9LFxuICB9O1xufTtcblxuZXhwb3J0IHsgU2hpcCB9O1xuIiwiaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vUGxheWVyXCI7XG5cbmNvbnN0IHJ1bkdhbWUgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBib2FyZE9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm9hcmQtb25lXCIpO1xuICBjb25zdCBib2FyZFR3byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm9hcmQtdHdvXCIpO1xuICBjb25zdCBwbGF5ZXIgPSBuZXcgUGxheWVyKCk7XG4gIGNvbnN0IGNvbXB1dGVyID0gbmV3IFBsYXllcihcImNvbXBcIik7XG4gIGxldCBjdXJyZW50VHVybiA9IHBsYXllcjtcblxuICBjb25zdCBpbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgIHBsYXllci5zZXRFbmVteShjb21wdXRlcik7XG4gICAgY29tcHV0ZXIuc2V0RW5lbXkocGxheWVyKTtcblxuICAgIHBsYXllci5teUJvYXJkLmxlZ2FsTW92ZXMuZm9yRWFjaCgoY29vcmQpID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwiYm9hcmQtaXRlbVwiKTtcbiAgICAgIGl0ZW0uZGF0YXNldC5jb29yZCA9IGNvb3JkLmpvaW4oXCJcIik7XG4gICAgICBib2FyZE9uZS5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICAgIGJvYXJkVHdvLmFwcGVuZENoaWxkKGl0ZW0uY2xvbmVOb2RlKCkpO1xuICAgIH0pO1xuXG4gICAgZ2FtZUxvb3AoKTtcbiAgfTtcblxuICBjb25zdCBnYW1lTG9vcCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZW5kZXIoKTtcbiAgICBpZiAoY3VycmVudFR1cm4gPT09IHBsYXllcikge1xuICAgICAgY29tcHV0ZXIubXlCb2FyZC5sZWdhbE1vdmVzLmZvckVhY2goKGxlZ2FsTW92ZSkgPT4ge1xuICAgICAgICBkb2N1bWVudFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKGAuYm9hcmQtdHdvID4gW2RhdGEtY29vcmQ9XCIke2xlZ2FsTW92ZS5qb2luKFwiXCIpfVwiXWApXG4gICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwcm9jZXNzQ2xpY2spO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcHJvY2Vzc0NsaWNrKCk7XG4gIH07XG5cbiAgY29uc3QgZW5kR2FtZSA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gIGNvbnN0IHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZW5kZXJNaXNzZXMoKTtcbiAgICByZW5kZXJIaXRzKCk7XG4gIH07XG5cbiAgY29uc3QgcHJvY2Vzc0NsaWNrID0gZnVuY3Rpb24gKGUgPSBcIm51bGxcIikge1xuICAgIGxldCBzdGF0dXM7XG4gICAgaWYgKGN1cnJlbnRUdXJuID09PSBwbGF5ZXIpIHtcbiAgICAgIGxldCBbeCwgeV0gPSBlLnRhcmdldC5kYXRhc2V0LmNvb3JkLnNwbGl0KFwiXCIpLm1hcChOdW1iZXIpO1xuICAgICAgc3RhdHVzID0gcGxheWVyLmF0dGFjayh4LCB5KTtcbiAgICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSBjdXJyZW50VHVybiA9IGNvbXB1dGVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0dXMgPSBjb21wdXRlci5jb21wQXR0YWNrKCk7XG4gICAgICBpZiAoc3RhdHVzID09PSBmYWxzZSkgY3VycmVudFR1cm4gPSBwbGF5ZXI7XG4gICAgfVxuXG4gICAgZ2FtZUxvb3AoKTtcbiAgfTtcblxuICBjb25zdCByZW5kZXJNaXNzZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgcmVuZGVyTWlzcyA9IGZ1bmN0aW9uIChwLCBudW0pIHtcbiAgICAgIHAubXlCb2FyZC5taXNzZWQuZm9yRWFjaCgobWlzcykgPT4ge1xuICAgICAgICBkb2N1bWVudFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKGAuYm9hcmQtJHtudW19ID4gW2RhdGEtY29vcmQ9XCIke21pc3Muam9pbihcIlwiKX1cIl1gKVxuICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKFwibWlzc2VkXCIpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJlbmRlck1pc3MocGxheWVyLCBcIm9uZVwiKTtcbiAgICByZW5kZXJNaXNzKGNvbXB1dGVyLCBcInR3b1wiKTtcbiAgfTtcblxuICBjb25zdCByZW5kZXJIaXRzID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHJlbmRlckhpdCA9IGZ1bmN0aW9uIChwLCBudW0pIHtcbiAgICAgIHAubXlCb2FyZC5zaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgIHNoaXAuaGl0LmZvckVhY2goKGhpdCkgPT4ge1xuICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcihgLmJvYXJkLSR7bnVtfSA+IFtkYXRhLWNvb3JkPVwiJHtoaXQuam9pbihcIlwiKX1cIl1gKVxuICAgICAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJlbmRlckhpdChwbGF5ZXIsIFwib25lXCIpO1xuICAgIHJlbmRlckhpdChjb21wdXRlciwgXCJ0d29cIik7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0aWFsaXplLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IHsgcnVuR2FtZSB9O1xuIiwiaW1wb3J0IHsgcnVuR2FtZSB9IGZyb20gXCIuL21vZHVsZXMvcnVuR2FtZVwiO1xuXG5ydW5HYW1lLmluaXRpYWxpemUoKTsiXSwibmFtZXMiOlsiUGxheWVyIiwiY29uc3RydWN0b3IiLCJpZCIsInRoaXMiLCJteUJvYXJkIiwibGVnYWxNb3ZlcyIsIngiLCJ5IiwicHVzaCIsInNoaXBzIiwibWlzc2VkIiwicGxhY2VTaGlwIiwiY29vcmRzIiwiaGl0IiwicHJvY2Vzc0hpdCIsImNvb3JkIiwiaXNTdW5rIiwibGVuZ3RoIiwiY29udGFpbnMiLCJhcnIiLCJvYmoiLCJjb21wYXJlIiwiZm9yRWFjaCIsIlNoaXAiLCJyZWNlaXZlQXR0YWNrIiwiZXZlcnkiLCJzaGlwIiwidXBkYXRlTGVnYWwiLCJhbGxTdW5rIiwiZmlsdGVyIiwiSlNPTiIsInN0cmluZ2lmeSIsImlzSWxsZWdhbCIsIkdhbWVCb2FyZCIsImVuZW15Iiwic2V0RW5lbXkiLCJwbGF5ZXIiLCJhdHRhY2siLCJyZWNlaXZlIiwiY29tcEF0dGFjayIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImJvYXJkT25lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYm9hcmRUd28iLCJjb21wdXRlciIsImN1cnJlbnRUdXJuIiwiZ2FtZUxvb3AiLCJyZW5kZXIiLCJwcm9jZXNzQ2xpY2siLCJsZWdhbE1vdmUiLCJqb2luIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbmRlck1pc3NlcyIsInJlbmRlckhpdHMiLCJlIiwic3RhdHVzIiwidGFyZ2V0IiwiZGF0YXNldCIsInNwbGl0IiwibWFwIiwiTnVtYmVyIiwicmVuZGVyTWlzcyIsInAiLCJudW0iLCJtaXNzIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVuZGVySGl0IiwiaW5pdGlhbGl6ZSIsIml0ZW0iLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJjbG9uZU5vZGUiXSwic291cmNlUm9vdCI6IiJ9